language: node_js
node_js:
- 7.2.1
dist: trusty
sudo: required
before_install:
- export CHROME_BIN=/usr/bin/google-chrome
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sudo apt-get update
- sudo apt-get install -y libappindicator1 fonts-liberation
- wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
- sudo dpkg -i google-chrome*.deb
before_script:
- jdk_switcher use oraclejdk8
after_success:
- npm run build
deploy:
  - provider: s3
    access_key_id: AKIAISJ3W5WFLEZY2EXQ
    secret_access_key:
      secure: "fvYtPXQO6k9+LS0G8WzeU4qyWWY8QZhGwxKoH0T8G3kRogE6KQZK/OratNbTQi6jTX0nTDdtm7PBYjqvPa737S4wqRsYEP1Vvs+6Wej9e+uo4oz43IGxiYbF9Q19OqtdRY1cAVfkZfE1IkkOW+yBAWj/aIB5+9QTFup9AZKhG/Cie1WcUtQ0bSFWP2aR2Oicv4eaXXlYubdW77lfXItjEih2sHj3yyCwVPvZ0FTXdcz3sE6MmsVuXLm+H7S6Twz+JyW1JJ067XlW/dm39UMi92xgDT3+BUa938uwC5whb+z/ng9FNI/ZFS0mxznnl+4ELkYt38lVRS6QGHXf6eQIpshGTftSTqGwrrmaYgt8TTXHmIG1PnLbLa0BCbebnCQio2+A5x3C5IR/evUo+Ru44UNbyIAfVadVxRuCRHIgQl7OdMa4wrpZT7cCugG3jV338PzZZS+Wiq17V6gMeeeVdVs8nhhwKwOA/wykTsb6QR65nGFhHDrBNbWKWEykVGkW4Ywp87Jv1/mKnHoEdTLyNv7cLd6JNFDPn0cP3CiV6SR6IXJcJBZH5RnOlJGfZjmdDNy0Z0/Y/Tb3GhxABoWKZxDDr5zYhc8kds6Uto+ZBRy/QdkrBBqj3fuSQ/3/vkhybkjqXsyvHKh++Zz0hl6wd5TymdfMrQZr9b64MDSHXRQ="
    bucket: mpower.sagebridge.org
    skip_cleanup: true
    acl: public_read
    detect_encoding: false
    region: us-east-1
    local_dir: dist
    on:
      branch: develop
  - provider: s3
    access_key_id: AKIAISJ3W5WFLEZY2EXQ
    secret_access_key:
      secure: "fvYtPXQO6k9+LS0G8WzeU4qyWWY8QZhGwxKoH0T8G3kRogE6KQZK/OratNbTQi6jTX0nTDdtm7PBYjqvPa737S4wqRsYEP1Vvs+6Wej9e+uo4oz43IGxiYbF9Q19OqtdRY1cAVfkZfE1IkkOW+yBAWj/aIB5+9QTFup9AZKhG/Cie1WcUtQ0bSFWP2aR2Oicv4eaXXlYubdW77lfXItjEih2sHj3yyCwVPvZ0FTXdcz3sE6MmsVuXLm+H7S6Twz+JyW1JJ067XlW/dm39UMi92xgDT3+BUa938uwC5whb+z/ng9FNI/ZFS0mxznnl+4ELkYt38lVRS6QGHXf6eQIpshGTftSTqGwrrmaYgt8TTXHmIG1PnLbLa0BCbebnCQio2+A5x3C5IR/evUo+Ru44UNbyIAfVadVxRuCRHIgQl7OdMa4wrpZT7cCugG3jV338PzZZS+Wiq17V6gMeeeVdVs8nhhwKwOA/wykTsb6QR65nGFhHDrBNbWKWEykVGkW4Ywp87Jv1/mKnHoEdTLyNv7cLd6JNFDPn0cP3CiV6SR6IXJcJBZH5RnOlJGfZjmdDNy0Z0/Y/Tb3GhxABoWKZxDDr5zYhc8kds6Uto+ZBRy/QdkrBBqj3fuSQ/3/vkhybkjqXsyvHKh++Zz0hl6wd5TymdfMrQZr9b64MDSHXRQ="
    bucket: parkinsonmpower.org
    skip_cleanup: true
    acl: public_read
    detect_encoding: false
    region: us-east-1
    local_dir: dist
    on:
      branch: release
cache:
  directories:
  - node_modules
